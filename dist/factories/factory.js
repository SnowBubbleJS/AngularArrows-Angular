"use strict";function output(t,r,o){var e={html:"",partial:"",app:"",controller:"",factory:"",source:"",url:"http://www.localhost:3000/",prepareSource:function(t){var r=this.html;t&&(r=r.replace(/<body([\s\S]*)\/body>/,"<body ui-view>"+this.partial+"<body>"));var o="<script>"+this.app+"</script>";r=r.replace("</body>",o+"</body>");var e="<script>"+this.controller+"</script>";r=r.replace("</body>",e+"</body>");var c="<script>"+this.factory+"</script>";return r=r.replace("</body>",c+"</body>")},render:function(){var r=document.querySelector("#output iframe");if("http://www.localhost:3000/"===this.url||"http://www.localhost:3000"===this.url){this.source=this.prepareSource(),o.checkInput(this.source)&&(t.$broadcast("answer:correct"),t.$destroy("answer:correct"));var e=r.contentDocument;e.open(),e.write(this.source),e.close()}else"http://www.localhost:3000/partial"===this.url?(this.source=this.prepareSource(!0),e=r.contentDocument,e.open(),e.write(this.source),e.close()):(e=r.contentDocument,e.open(),e.write(404),e.close())}};return e}angular.module("app").factory("output",output),output.$inject=["$rootScope","promptFactory","inputFactory"];