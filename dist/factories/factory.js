"use strict";function output(r,t,e){var o={html:"",partial:"",app:"",controller:"",factory:"",source:"",prepareSource:function(r){var t=this.html;r&&(t=t.replace(/<body([\s\S]*)\/body>/,"<body ui-view>"+this.partial+"<body>"));var e="<script>"+this.app+"</script>";t=t.replace("</body>",e+"</body>");var o="<script>"+this.controller+"</script>";t=t.replace("</body>",o+"</body>");var c="<script>"+this.factory+"</script>";return t=t.replace("</body>",c+"</body>")},render:function(){var t=document.querySelector("#output iframe");t.remove(),$("<iframe />").appendTo("#output"),t=document.querySelector("#output iframe"),this.source=this.prepareSource(),e.checkInput(this.source)&&(r.$broadcast("answer:correct"),r.$destroy("answer:correct"));var o=t.contentDocument;o.open(),o.write(this.source),o.close()}};return o}angular.module("app").factory("output",output),output.$inject=["$rootScope","promptFactory","inputFactory"];